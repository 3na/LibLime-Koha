<!-- TMPL_INCLUDE NAME="doc-head-open.inc" -->
<title>Koha &rsaquo; Catalog &rsaquo; Advanced Search</title>
<!-- TMPL_INCLUDE NAME="doc-head-close.inc" -->
<script type="text/JavaScript" language="JavaScript">
	/**
	 *  Function add_field();
	 *  This function allows to display a new field to search.
	 */
	function add_field() {
	    var ButtonPlus = document.getElementById("ButtonPlus");
		var line = ButtonPlus.parentNode;
		var dad  = line.parentNode;
		dad.appendChild(line.cloneNode(true));
		line.removeChild(ButtonPlus);
	}
	$(document).ready(function() {
		$("input[name=q]:eq(0)").focus();
	});
   function valForm() {
      var idxs = document.myf.idx;
      for(var i=0;i<idxs.length;i++) {
         var val = idxs[i].options[idxs[i].selectedIndex].value;
         if (val=='biblionumber' || val=='nb') {
            var q = document.myf.q[i].value;
            q = q.replace(/[^0-9a-z]/gi,'');
            document.myf.q[i].value = q;
         }
      }
      return true;
   }
</script>
<script type="text/javascript"> 
//expand or collapse search limit options

function expand_itemtype(){
  $("div#advsearch-itemtype").toggle('slow');
}
function expand_pubrange(){
  $("div#pubrange").toggle('slow');
}
function expand_ccode(){
  $("div#advsearch-ccode").toggle('slow');
}
function expand_shelvingloc(){
  $("div#advsearch-shelvingloc").toggle('slow');
}
function expand_subtypes(){
  $("div#subtypes").toggle('slow');
}
function expand_location(){
  $("div#location").toggle('slow');
}
function expand_language(){
  $("div#language").toggle('slow');
}
function expand_sortby(){
  $("div#sortby").toggle('slow');
}
</script>
</head>
<body>

<!-- TMPL_UNLESS NAME="last_borrower_show_button" -->
	<!-- TMPL_INCLUDE NAME="header.inc" -->
	<div id="breadcrumbs"><a href="/cgi-bin/koha/mainpage.pl">Home</a> &rsaquo; Advanced Search</div>
<!-- /TMPL_UNLESS -->

<div id="doc" class="yui-t7">
   <div id="bd">
	
<form action="search.pl" method="get" name="myf" id="myf" onsubmit="valForm();">
<div id="advanced-search">
<h1>Advanced Search</h1>

<!-- TMPL_IF NAME="outer_servers_loop" -->
<!-- DATABASES -->

<fieldset>
        <legend>Select local databases</legend>
                <!-- TMPL_LOOP NAME="local_servers_loop" -->
<!-- TMPL_IF NAME="checked" --><input type="checkbox" id="<!-- TMPL_VAR NAME="id" -->" name="<!-- TMPL_VAR NAME="name" -->" checked="checked" value="<!-- TMPL_VAR NAME="value" -->" /><!-- TMPL_ELSE --><input type="checkbox" id="<!-- TMPL_VAR NAME="id" -->" name="<!-- TMPL_VAR NAME="name" -->" value="<!-- TMPL_VAR NAME="value" -->" /><!-- /TMPL_IF --><label for="<!-- TMPL_VAR NAME="id" -->"><img width="16" height="16" alt="<!-- TMPL_VAR NAME="id" -->" src="<!-- TMPL_VAR NAME="themelang" -->/img/<!-- TMPL_VAR NAME="icon" -->" /> <!-- TMPL_VAR NAME="label" --></label><!-- /TMPL_LOOP -->
</fieldset>
<!-- /DATABASES -->
<!-- /TMPL_IF -->

<!-- TMPL_IF NAME="outer_servers_loop" -->
<!-- REMOTE DATABASES -->
<fieldset>
    <legend>Select remote databases:</legend>
                <!-- TMPL_LOOP NAME="outer_servers_loop" -->
                <!-- TMPL_IF NAME="checked" --><input type="checkbox" id="<!-- TMPL_VAR NAME="id" -->" name="<!-- TMPL_VAR NAME="name" -->" checked="checked" value="<!-- TMPL_VAR NAME="value" -->" /><!-- TMPL_ELSE --><input type="checkbox" id="<!-- TMPL_VAR NAME="id" -->" name="<!-- TMPL_VAR NAME="name" -->" value="<!-- TMPL_VAR NAME="value" -->" /><!-- /TMPL_IF -->
<label for="<!-- TMPL_VAR NAME="id" -->"><img alt="<!-- TMPL_VAR NAME="id" -->" src="<!-- TMPL_VAR NAME="themelang" -->/images/<!-- TMPL_VAR NAME="icon" -->" /><!-- TMPL_VAR NAME="label" --></label>
                <!-- /TMPL_LOOP -->
    </fieldset>
<!-- /REMOTE DATABASES -->
<!-- /TMPL_IF -->

<!-- BOOLEAN SEARCH OPTIONS -->
    <fieldset>
    <legend>Search For: </legend>
    <!-- TMPL_LOOP NAME="search_boxes_loop" -->
        <!-- TMPL_IF NAME="search_boxes_label" --><div style="text-indent: 4.5em;"><!-- TMPL_ELSE --><div><!-- /TMPL_IF -->
			<!-- TMPL_IF NAME="expanded_options" -->
            <!-- TMPL_IF NAME="boolean" -->
                <select name="op">
                    <option value="and" selected="selected">and</option>
                    <option value="or">or</option>
                    <option value="not">not</option>
                </select>
            <!-- /TMPL_IF --> 
			<!-- /TMPL_IF -->
			<!-- TMPL_INCLUDE NAME="search_indexes.inc" -->
			<input type="text" size="30" name="q" title="Enter search terms" value="" />
            <!-- TMPL_IF NAME="expanded_options" -->
                <!-- TMPL_IF NAME="add_field" -->
                    <a href="JavaScript:add_field();" id="ButtonPlus" title="Add another field">[+]</a>
				<!-- /TMPL_IF -->
            	<!-- TMPL_IF NAME="scan_index" -->
                	<label for="scan">Scan Indexes</label><input type="checkbox" name="scan" id="scan" value="1" />
            	<!-- /TMPL_IF -->
            <!-- /TMPL_IF -->
		</div>
    <!-- /TMPL_LOOP -->
    </fieldset>
<!-- /BOOLEAN SEARCH OPTIONS -->
<!-- SEARCH BUTTONS -->
            <p><input class="submit" type="submit" accesskey="s" value="Search" />
            <!-- TMPL_IF NAME="ItemTypeLimit" -->
            <a href="javascript:;" onclick=expand_itemtype()>[+/- Item Types]</a>
            <!-- /TMPL_IF -->
            <!-- TMPL_IF NAME="CCodeLimit" -->
            <a href="javascript:;" onclick=expand_ccode()>[+/- Collection Codes]</a>
            <!-- /TMPL_IF -->

            <!-- TMPL_IF NAME="ShelvingLocationLimit" -->
            <a href="javascript:;" onclick=expand_shelvingloc()>[+/- Shelving Locations]</a>
            <!-- /TMPL_IF -->

            <!-- TMPL_IF NAME="SubtypeLimit" -->
            <a href="javascript:;" onclick=expand_subtypes()>[+/- Subtypes]</a>
            <!-- /TMPL_IF -->

            <!-- TMPL_IF NAME="LanguageLimit" -->
            <a href="javascript:;" onclick=expand_language()>[+/- Language]</a>
            <!-- /TMPL_IF -->

            <!-- TMPL_IF NAME="DateRangeLimit" -->
            <a href="javascript:;" onclick=expand_pubrange()>[+/- Date]</a>
            <!-- /TMPL_IF -->
            <!-- TMPL_IF NAME="LocationLimit" -->
            <a href="javascript:;" onclick=expand_location()>[+/- Location]</a>
            <!-- /TMPL_IF -->
            <!-- TMPL_IF NAME="SortByLimit" -->
            <a href="javascript:;" onclick=expand_sortby()>[+/- Sort By]</a>
            <!-- /TMPL_IF -->
            <!-- TMPL_IF NAME="expanded_options" -->
            <a href="/cgi-bin/koha/catalogue/search.pl?expanded_options=0">[Fewer Options]</a>
            <!-- TMPL_ELSE -->
            <a href="/cgi-bin/koha/catalogue/search.pl?expanded_options=1">[More options]</a>
            <!-- /TMPL_IF -->
            <a href="/cgi-bin/koha/catalogue/search.pl?do=Clear">[New search]</a> 
            </p>
<!-- /SEARCH BUTTONS -->


</div>

</div>

<div class="yui-g">
  <!-- TMPL_IF NAME="DisplayAdvancedSearchLimits" -->
    <!-- TMPL_IF NAME="ItemTypeLimit" -->
    <div id="advsearch-itemtype" class="container">
	<fieldset>
    <legend>Item Types:</legend>
    <table>
        <tr>
       <!--TMPL_LOOP Name="itemtypeloop"-->
        <td><input type="checkbox" id="<!-- TMPL_VAR NAME="ccl" -->-<!--TMPL_VAR Name="number" -->" name="limit" value="mc-<!-- TMPL_VAR NAME="ccl" -->:<!--TMPL_VAR Name="code" -->"/><label for="<!-- TMPL_VAR NAME="ccl" -->-<!--TMPL_VAR Name="number" -->"><!-- TMPL_IF name="imageurl"--><img border="0" src="<!--TMPL_VAR Name="imageurl" -->" alt="<!--TMPL_VAR Name="description" -->" /><!-- /TMPL_IF -->&nbsp;
        <!--TMPL_VAR Name="description" --></label></td>
        <!-- TMPL_UNLESS name="count5" --><!-- TMPL_UNLESS name="__last__" --></tr><tr><!-- /TMPL_UNLESS --><!-- /TMPL_UNLESS -->
       <!--/TMPL_LOOP-->
		</tr>
    </table>
	</fieldset>
    </div>
   <!-- /TMPL_IF -->

   <!-- TMPL_IF NAME="CCodeLimit" -->

    <div id="advsearch-ccode" class="container">
	<fieldset>
    <legend>Collection Codes:</legend>
    <table>
        <tr>
      <!--TMPL_LOOP Name="ccodeloop"-->
        <td><input type="checkbox" id="<!-- TMPL_VAR NAME="ccl" -->-<!--TMPL_VAR Name="number" -->" name="limit" value="mc-<!-- TMPL_VAR NAME="ccl" -->:<!--TMPL_VAR Name="code" -->"/><label for="<!-- TMPL_VAR NAME="ccl" -->-<!--TMPL_VAR Name="number" -->"><!-- TMPL_IF name="imageurl"--><img border="0" src="<!--TMPL_VAR Name="imageurl" -->" alt="<!--TMPL_VAR Name="description" -->" /><!-- /TMPL_IF -->&nbsp;
        <!--TMPL_VAR Name="description" --></label></td>
        <!-- TMPL_UNLESS name="count5" --><!-- TMPL_UNLESS name="__last__" --></tr><tr><!-- /TMPL_UNLESS --><!-- /TMPL_UNLESS -->
      <!--/TMPL_LOOP-->
		</tr>
    </table>
	</fieldset>
    </div>
    <!-- /TMPL_IF -->

     <!-- TMPL_IF NAME="ShelvingLocationLimit" -->
    <div id="advsearch-shelvingloc" class="container">
	<fieldset>
    <legend>Shelving Locations:</legend>
    <table>
        <tr>
      <!--TMPL_LOOP Name="shelvinglocsloop"-->
        <td><input type="checkbox" id="<!-- TMPL_VAR NAME="ccl" -->-<!--TMPL_VAR Name="number" -->" name="limit" value="mc-<!-- TMPL_VAR NAME="ccl" -->:<!--TMPL_VAR Name="code" -->"/><label for="<!-- TMPL_VAR NAME="ccl" -->-<!--TMPL_VAR Name="number" -->">
        <!--TMPL_VAR Name="description" --></label></td>
        <!-- TMPL_UNLESS name="count5" --><!-- TMPL_UNLESS name="__last__" --></tr><tr><!-- /TMPL_UNLESS --><!-- /TMPL_UNLESS -->
      <!--/TMPL_LOOP-->
		</tr>
    </table>
	</fieldset>
    </div>
      <!-- /TMPL_IF -->

     <!-- TMPL_IF NAME="SubtypeLimit" -->
    <!--TMPL_IF Name="usmarc"-->
        <!-- SUBTYPE LIMITS -->
            <div id="subtypes" class="container"><fieldset>
            <legend>Subtypes:</legend>
            <select name="limit" class="subtype">
                  <option value="" selected="selected" class="menuheader">Any audience</option>
                  <option value="(aud:a or aud:b or aud:c or aud:j)">Children</option>
		    <option value="aud:a">Preschool</option>
		    <option value="aud:b">Primary</option>
		    <option value="aud:c">Pre-teen</option>
		    <option value="aud:d">Teen</option>
            </select>
        
            <select name="limit" class="subtype">
                  <option value="" selected="selected" class="menuheader">Any Content</option>
                  <option value="(rtype:a and (fic:1 or fic:c or fic:f or fic:j))">Fiction books</option>
                  <option value="(rtype:a and (fic:0 or fic:d or fic:e or fic:h or fic:i or fic:m or fic:s))">Non-fiction books</option>
                  <option value="(rtype:a and fic:p)">Poetry</option>
                  <option value="rtype:a and fic:j">Short stories</option>
                  <option value="(rtype:a and (bio:b or bio:c))">Biographies</option>
                  <option value="(rtype:a and bio:a)">Autobiographies</option>
            </select>

            <select name="limit" class="subtype">
                  <option value="" selected="selected" class="menuheader">Any Format</option>
                  <option value="ff8-23:d">Large print books</option>
                  <option value="ff8-23:f">Braille books</option>
                  <option value="g-format:6">Graphic novels</option>
                  <option value="">-----------</option>
                  <option value="(dt-vis:v and v-format:v)">DVDs</option>
                  <option value="(dt-vis:v and v-format:s)">Blu-ray DVDs</option> 
                  <option value="l-format:vf">Videocassettes</option>
                  <option value="">-----------</option>
                  <option value="l-format:sd">Compact discs</option>
                  <option value="l-format:sz">Digital audio players</option>
                  <option value="l-format:ss">Cassettes</option>
                  <option value="">-----------</option>
                  <option value="l-format:co">Software</option>
                  <option value="(dt-cf:c and e-format:g)">Video games</option>
                  <option value="l-format:cr">Websites and downloadables</option>
                  <option value="">-----------</option>
                  <option value="mus:j">Music</option>
                  <option value="mus:i">Audiobooks</option>
             </select>
        
       <!-- <select name="limit" class="subtype">
            <option value="" >Additional content types</option>
            <option value="ctype:a" >Abstracts/summaries</option>
            <option value="ctype:b" >Bibliographies</option>
            <option value="ctype:c" >Catalogs</option>
            <option value="ctype:d" >Dictionaries</option>
            <option value="ctype:e" >Encyclopedias </option>
            <option value="ctype:f" >Handbooks</option>
            <option value="ctype:g" >Legal articles</option>
            <option value="ctype:i" >Indexes</option>
            <option value="ctype:j" >Patent document</option>
            <option value="ctype:k" >Discographies</option>
            <option value="ctype:l" >Legislation</option>
            <option value="ctype:m" >Theses</option>
            <option value="ctype:n" >Surveys</option>
            <option value="ctype:o" >Reviews</option>
            <option value="ctype:p" >Programmed texts</option>
            <option value="ctype:q" >Filmographies</option>
            <option value="ctype:r" >Directories</option>
            <option value="ctype:s" >Statistics</option>
            <option value="ctype:t" >Technical reports</option>
            <option value="ctype:v" >Legal cases and case notes</option>
            <option value="ctype:w" >Law reports and digests</option>
            <option value="ctype:z" >Treaties </option>
        </select> -->

    
    </fieldset></div>
    <!--/TMPL_IF -->

    <!--TMPL_IF Name="UNIMARC" -->
        <div id="subtypes_unimarc" class="container"><!-- SUBTYPE LIMITS -->
    <!-- TMPL_INCLUDE NAME="subtypes_unimarc.inc" --></div>
    <!--/TMPL_IF-->

<!--/TMPL_IF-->
</div>

    <!--/TMPL_IF -->
     <!-- TMPL_IF NAME="LanguageLimit" -->
        <div id="language" class="container">
        <fieldset>
        <!-- LANGUAGE LIMIT -->   
              <legend>Language:</legend>                                    
		<select name="limit">
		<option value="">No Limit</option>
		<!-- TMPL_LOOP NAME="search_languages_loop" -->
		<!-- TMPL_IF NAME="selected" -->
		<option value="ln:<!-- TMPL_VAR NAME="iso639_2_code" -->" selected="selected"><!-- TMPL_VAR NAME="language_description" --></option>
		<!-- TMPL_ELSE -->
		<option value="ln:<!-- TMPL_VAR NAME="iso639_2_code" -->"><!-- TMPL_VAR NAME="language_description" --></option>
		<!-- /TMPL_IF -->		
		<!-- /TMPL_LOOP -->
		</select></p><!-- <a href="">Show all languages</a>-->
       <!-- /LANGUAGE LIMIT -->
       </fieldset>
       </div>
    <!--/TMPL_IF-->
     <!-- TMPL_IF NAME="DateRangeLimit" -->
<div id="pubrange" class="container">
<fieldset>
<!-- PUB RANGE OPTION -->
<legend>Publication Date Range:</legend>
<span>For example:  1999-2001.  You could also use "-1987" for everything published before 1987 or "2008-" for everything published after 2008.</span>
<input type="text" size="30" name="limit-yr" title="Enter search terms" value="" />
</fieldset>
<!-- /PUB RANGE OPTION -->
</div>

      <!-- /TMPL_IF -->

<div class="yui-g">
<div class="yui-u first">
 <!--TMPL_IF NAME="LocationLimit" -->
<!-- AVAILABILITY LIMITS -->
	<!-- TMPL_UNLESS NAME="singleBranchMode" -->
    <div id="location" class="container"><fieldset><legend>Location and availability: </legend>
        
        <select name="limit" id="branchloop">
        <option value="">All libraries</option>


       <!-- TMPL_LOOP NAME="branchloop" -->
        <!--TMPL_IF Name="selected"-->
        <option value="branch:<!-- TMPL_VAR NAME="value" -->" selected="selected"><!-- TMPL_VAR NAME="branchname" --></option>
        <!--TMPL_ELSE-->    
        <option value="branch:<!-- TMPL_VAR NAME="value" -->"><!-- TMPL_VAR NAME="branchname" --></option>
        <!--/TMPL_IF-->    
        <!-- /TMPL_LOOP -->
        </select>

        <!--TMPL_IF NAME="searchdomainoptions" -->
        <div id="searchcategories">
          <select name="multibranchlimit">
            <option value="">All categories</option>
            <!-- TMPL_LOOP NAME="searchdomainoptions" -->
            <option value="<TMPL_VAR NAME="categorycode">" <TMPL_IF NAME="selected">selected="selected"</TMPL_IF>><TMPL_VAR NAME="categoryname"></option>
            <!-- /TMPL_LOOP -->
          </select>
        </div>
        <!-- /TMPL_IF -->
        
        <div style="margin-top:.4em"><label for="available-items"><input type="checkbox" id="available-items" name="limit" value="available" /> Only items currently available for loan or reference</label></div>
    </fieldset></div>
	<!-- /TMPL_UNLESS -->
<!-- /AVAILABILITY LIMITS -->
    <!-- /TMPL_IF -->
</div>
<div class="yui-u">
<!--TMPL_IF NAME="SortByLimit" -->

<!-- RANK LIMITS -->
    <div id="sortby" class="container"><fieldset><legend>Sort by: </legend>
        <select id="sort_by" name="sort_by">
<!--TMPL_INCLUDE NAME="resort_form.inc" -->
</select></fieldset></div>
<!-- RANK LIMITS -->

    <!-- /TMPL_IF -->
</div>
    <!-- /TMPL_IF -->

</div>
<input type="hidden" name="last_borrower_show_button" id="last_borrower_show_button" value="<!-- TMPL_VAR NAME="last_borrower_show_button" -->" />

<!-- SEARCH BUTTONS -->
            <p><input class="submit" type="submit" accesskey="s" value="Search" />
            <!-- TMPL_IF NAME="ItemTypeLimit" -->
            <a href="javascript:;" onclick=expand_itemtype()>[+/- Item Types]</a>
            <!-- /TMPL_IF -->
            <!-- TMPL_IF NAME="CCodeLimit" -->
            <a href="javascript:;" onclick=expand_ccode()>[+/- Collection Codes]</a>
            <!-- /TMPL_IF -->

            <!-- TMPL_IF NAME="ShelvingLocationLimit" -->
            <a href="javascript:;" onclick=expand_shelvingloc()>[+/- Shelving Locations]</a>
            <!-- /TMPL_IF -->

            <!-- TMPL_IF NAME="SubtypeLimit" -->
            <a href="javascript:;" onclick=expand_subtypes()>[+/- Subtypes]</a>
            <!-- /TMPL_IF -->
            <!-- TMPL_IF NAME="LanguageLimit" -->
            <a href="javascript:;" onclick=expand_language()>[+/- Language]</a>
            <!-- /TMPL_IF -->
            <!-- TMPL_IF NAME="DateRangeLimit" -->
            <a href="javascript:;" onclick=expand_pubrange()>[+/- Date]</a>
            <!-- /TMPL_IF -->
            <!-- TMPL_IF NAME="LocationLimit" -->
            <a href="javascript:;" onclick=expand_location()>[+/- Location]</a>
            <!-- /TMPL_IF -->
            <!-- TMPL_IF NAME="SortByLimit" -->
            <a href="javascript:;" onclick=expand_sortby()>[+/- Sort By]</a>
            <!-- /TMPL_IF -->
            <!-- TMPL_IF NAME="expanded_options" -->
            <a href="/cgi-bin/koha/catalogue/search.pl?expanded_options=0">[Fewer Options]</a>
            <!-- TMPL_ELSE -->
            <a href="/cgi-bin/koha/catalogue/search.pl?expanded_options=1">[More options]</a>
            <!-- /TMPL_IF -->
            <a href="/cgi-bin/koha/catalogue/search.pl?do=Clear">[New search]</a> 
            </p>
<!-- /SEARCH BUTTONS -->
</form>
</div>

<!-- TMPL_INCLUDE NAME="intranet-bottom.inc" -->
